<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –∞—Ä–µ–Ω–¥—ã - CarRental</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        .rentals-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        .rental-card {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }
        .rental-card:hover {
            border-color: #0d6efd;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .status-pending { border-left: 5px solid #ffc107; }
        .status-confirmed { border-left: 5px solid #198754; }
        .status-active { border-left: 5px solid #0d6efd; }
        .status-completed { border-left: 5px solid #6c757d; }
        .status-cancelled { border-left: 5px solid #dc3545; }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">üöó CarRental</a>
        <div class="navbar-nav">
            <a class="nav-link" href="/cars">–í—Å–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</a>
            <a class="nav-link active" href="/rentals/my-rentals">–ú–æ–∏ –∞—Ä–µ–Ω–¥—ã</a>
        </div>
    </div>
</nav>

<div class="rentals-container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="bi bi-list-ul"></i> –ú–æ–∏ –∞—Ä–µ–Ω–¥—ã</h1>
        <a href="/cars" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> –ù–æ–≤–∞—è –∞—Ä–µ–Ω–¥–∞
        </a>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div th:if="${error}" class="alert alert-danger">
        <span th:text="${error}"></span>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –∞—Ä–µ–Ω–¥ -->
    <div th:if="${rentals != null and !rentals.empty}">
        <div th:each="rental : ${rentals}"
             class="rental-card status-${rental.status.name().toLowerCase()}">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-2 text-center">
                        <img th:src="${rental.car.imageUrl ?: '/images/cars/default-car.jpg'}"
                             class="img-fluid rounded"
                             style="max-height: 80px; object-fit: cover;"
                             th:alt="${rental.car.brand + ' ' + rental.car.model}">
                    </div>
                    <div class="col-md-3">
                        <h5 th:text="${rental.car.brand + ' ' + rental.car.model}"></h5>
                        <small class="text-muted" th:text="${rental.car.year + ' –≥–æ–¥'}"></small>
                    </div>
                    <div class="col-md-2">
                        <strong>–î–∞—Ç—ã:</strong><br>
                        <small th:text="${#temporals.format(rental.startDate, 'dd.MM.yy')} + ' - ' + ${#temporals.format(rental.endDate, 'dd.MM.yy')}"></small>
                    </div>
                    <div class="col-md-2">
                        <strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong><br>
                        <span class="text-success" th:text="${rental.totalPrice} + ' ‚ÇΩ'"></span>
                    </div>
                    <div class="col-md-2">
                        <strong>–°—Ç–∞—Ç—É—Å:</strong><br>
                        <span th:classappend="'badge bg-' + ${{
                                'PENDING': 'warning',
                                'CONFIRMED': 'success',
                                'ACTIVE': 'primary',
                                'COMPLETED': 'secondary',
                                'CANCELLED': 'danger'
                            }[rental.status.name()]}">
                                <th:block th:switch="${rental.status}">
                                    <span th:case="PENDING">‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ</span>
                                    <span th:case="CONFIRMED">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ</span>
                                    <span th:case="ACTIVE">üöó –í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
                                    <span th:case="COMPLETED">üìã –ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                                    <span th:case="CANCELLED">‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ</span>
                                </th:block>
                            </span>
                    </div>
                    <div class="col-md-1 text-end">
                        <a th:href="@{/rentals/confirmation/{id}(id=${rental.id})}"
                           class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-eye"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–µ—Ç –∞—Ä–µ–Ω–¥ -->
    <div th:if="${rentals == null or rentals.empty}" class="text-center py-5">
        <i class="bi bi-car-front" style="font-size: 4rem; color: #6c757d;"></i>
        <h3 class="text-muted mt-3">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞—Ä–µ–Ω–¥</h3>
        <p class="text-muted">–ù–∞—á–Ω–∏—Ç–µ —Å –≤—ã–±–æ—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –¥–ª—è –∞—Ä–µ–Ω–¥—ã</p>
        <a href="/cars" class="btn btn-primary btn-lg">
            <i class="bi bi-search"></i> –ù–∞–π—Ç–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—å
        </a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>