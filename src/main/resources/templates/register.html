<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è - CarRental</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        .register-container {
            max-width: 600px;
            margin: 50px auto;
            padding: 2rem;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .role-card {
            cursor: pointer;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }
        .role-card:hover {
            border-color: #0d6efd;
        }
        .role-card.selected {
            border-color: #0d6efd;
            background-color: #f8f9fa;
        }
        .role-info {
            font-size: 0.9em;
            color: #6c757d;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/">üöó CarRental</a>
        <div class="navbar-nav">
            <a class="nav-link" href="/">–ì–ª–∞–≤–Ω–∞—è</a>
            <a class="nav-link" href="/cars">–ê–≤—Ç–æ–º–æ–±–∏–ª–∏</a>
            <a class="nav-link" href="/login">–í–æ–π—Ç–∏</a>
        </div>
    </div>
</nav>

<div class="container">
    <div class="register-container">
        <h2 class="text-center mb-4">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ CarRental</h2>

        <div th:if="${error}" class="alert alert-danger" role="alert">
            <span th:text="${error}">–û—à–∏–±–∫–∞</span>
        </div>

        <div th:if="${success}" class="alert alert-success" role="alert">
            <span th:text="${success}">–£—Å–ø–µ—Ö</span>
        </div>

        <form method="post" action="/register" id="registerForm">
            <!-- –í—ã–±–æ—Ä —Ä–æ–ª–∏ -->
            <div class="mb-4">
                <label class="form-label fw-bold">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∞–∫–∫–∞—É–Ω—Ç–∞ *</label>

                <div class="role-card" onclick="selectRole('CLIENT')" id="clientCard">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="role"
                               id="roleClient" value="CLIENT" checked>
                        <label class="form-check-label fw-bold" for="roleClient">
                            üë§ –ö–ª–∏–µ–Ω—Ç
                        </label>
                    </div>
                    <div class="role-info">
                        –ê—Ä–µ–Ω–¥–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
                    </div>
                </div>

                <div class="role-card" onclick="selectRole('MANAGER')" id="managerCard">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="role"
                               id="roleManager" value="MANAGER">
                        <label class="form-check-label fw-bold" for="roleManager">
                            üë®‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä
                        </label>
                    </div>
                    <div class="role-info">
                        –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º–∏ –¥–ª—è –∞—Ä–µ–Ω–¥—ã
                    </div>
                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="fullName" class="form-label">–§–ò–û *</label>
                    <input type="text" class="form-control" id="fullName" name="fullName" required>
                </div>

                <div class="col-md-6 mb-3">
                    <label for="email" class="form-label">Email *</label>
                    <input type="email" class="form-control" id="email" name="email" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="password" class="form-label">–ü–∞—Ä–æ–ª—å *</label>
                    <input type="password" class="form-control" id="password" name="password"
                           required minlength="6">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="confirmPassword" class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è *</label>
                    <input type="password" class="form-control" id="confirmPassword"
                           name="confirmPassword" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="phone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" class="form-control" id="phone" name="phone" required>
                </div>

                <!-- –ü–æ–ª–µ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤) -->
                <div class="col-md-6 mb-3" id="driverLicenseField">
                    <label for="driverLicense" class="form-label">–í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞ *</label>
                    <input type="text" class="form-control" id="driverLicense" name="driverLicense">
                    <div class="form-text">–°–µ—Ä–∏—è –∏ –Ω–æ–º–µ—Ä</div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100 btn-lg">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>

        <div class="text-center mt-3">
            <small>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="/login">–í–æ–π—Ç–∏</a></small>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // –í—ã–±–æ—Ä —Ä–æ–ª–∏
    function selectRole(role) {
        document.getElementById('role' + (role === 'CLIENT' ? 'Client' : 'Manager')).checked = true;

        // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª –≤—ã–±–æ—Ä–∞
        document.getElementById('clientCard').classList.toggle('selected', role === 'CLIENT');
        document.getElementById('managerCard').classList.toggle('selected', role === 'MANAGER');

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–µ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤
        const licenseField = document.getElementById('driverLicenseField');
        if (role === 'CLIENT') {
            licenseField.style.display = 'block';
            document.getElementById('driverLicense').required = true;
        } else {
            licenseField.style.display = 'none';
            document.getElementById('driverLicense').required = false;
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', function() {
        selectRole('CLIENT'); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–ª–∏–µ–Ω—Ç
    });

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
    document.getElementById('registerForm').addEventListener('submit', function(e) {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        if (password !== confirmPassword) {
            e.preventDefault();
            alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
            return false;
        }
    });
</script>
</body>
</html>